@model IDemotivator.Demotivator

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    #canvas-container {
            position: relative;
            width: 900px;
            height: 550px;
            box-shadow: 0 0 5px 1px black;
            margin: 10px auto;
            border: 5px solid transparent;
        }
        #canvas-container.over {
            border: 1px dashed #000000;
</style>
<h2>Create</h2>


@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <h4>Demotivator</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
       
        <div id="canvas-container">
            <canvas id="canvas" width="900" height="550"></canvas>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Url_Img, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Url_Img, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Url_Img, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Url_Img_Origin, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Url_Img_Origin, new { htmlAttributes = new { @class = "form-control", id = "url2"} })
                @Html.ValidationMessageFor(model => model.Url_Img_Origin, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Str1, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Str1, new { htmlAttributes = new { @class = "form-control", id = "str11"} })
                @Html.ValidationMessageFor(model => model.Str1, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Str2, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Str2, new { htmlAttributes = new { @class = "form-control", id = "str22"} })
                @Html.ValidationMessageFor(model => model.Str2, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
                <input type="button" value="Preview" id="textin" class="btn btn-default" />
            </div>
        </div>
        <input type="file" name="upload" id="uploadFile" /><br />
        <button id="submit">Загрузить</button>
        <form id="fileUpload" action="@Url.Action("AddImage")" method="POST" enctype="multipart/form-data">
            <input id="fileInput" type="file" />
            <input type="button" value="Upload file" id="btnFileUpload" />
        </form>
    </div>
}


<div>
    @Html.ActionLink("Back to List", "Index")
</div>

<script src="~/Scripts/fabric.js"></script>
<script src="~/Scripts/DemoCreate.js"></script>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

<script type="text/javascript">

            $("#btnFileUpload").click(function() {
                var formData = new FormData();
                var file = document.getElementById("fileInput").files[0];
                formData.append("fileInput", file);

                $.ajax({
                    url: "/Demotivators/Upload",
                    type: "POST",
                    data: formData,
                    contentType: false,
                    processData: false,
                    success: function() {
                        alert("URA");
                    }
                });
            });

</script>

}